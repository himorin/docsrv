[% PROCESS global/header.html.tmpl %]

[% IF added.defined %]
<h3>New document added to path '[% full_path %]'</h3>
<p>New document : [% added %]</p>
[% END %]

<h3>General path informations</h3>

<ul>
  <li>Path ID: [% path_info.pathid %]</li>
  <li>Full path: [% full_path %]</li>
  <li>Parenet: [% path_info.parent %]</li>
  <li>Name: [% path_info.pathname %]</li>
  <li>Description: [% path_info.description %]</li>
  <li>Accessible groups: [% permission.join(', ') %] </li>
</ul>

<h3>Current document list in this directory</h3>

<ul>
  [% FOREACH item = doc_list %]
    <li>ID #[% item.docid %]: <a href="docinfo.cgi?did=[% item.docid %]">[% item.filename %]</a> ([% item.description %])</li>
  [% END %]
</ul>

<hr>

<form action="docadd.cgi" method="POST" enctype="multipart/form-data">

<ul>
  <li>New document name: <input type="text" name="filename" value="" size="50"></li>
  <li>Document descripion: <input type="text" name="docdesc" value="" size="50"></li>
</ul>

<p>Apply label to this document

<ul>
  [% FOREACH item = def_label.keys %]
    <li><input type="checkbox" name="label" value="[% item %]" />
      [% def_label.$item.name %] ([% def_label.$item.description %])</li>
  [% END %]
</ul>

[% IF dav_file.defined %]
  <p>
    [% IF dav_file.keys.size == 0 %]
      No source file in DAV
    [% ELSE %]
      <input type="radio" name="source" value="dav" /> Use file from DAV source :
      <select name="dav_source">
        [% FOREACH item IN dav_file.keys %]
          <option value="[% item %]">[% item %] ([% dav_file.$item %] byte)</option>
        [% END %]
      </select>
    [% END %]
  </p>
[% END %]

<p>
  <input type="radio" name="source" value="upload" /> ローカルファイルを利用: 
  <input type="file" name="target_file" />
</p>

<p>
Comment: <input type="text" name="comment" value="" size="50">
</p>


<input type="hidden" name="pid" value="[% path_info.pathid %]">
<input type="submit" value="Add document">
<input type="reset" value="Reset">
</form>

[% PROCESS global/footer.html.tmpl %]
