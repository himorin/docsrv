[% PROCESS global/header.html.tmpl %]

[% IF added.defined %]
  <h3>'[% full_path FILTER html %]' にドキュメント [% added FILTER html %] が追加されました</h3>
[% ELSE %]
  <h3>新しいドキュメントの追加</h3>
  <form action="docadd.cgi" method="POST" enctype="multipart/form-data">
    [% PROCESS global/formopt.html.tmpl %]
    <ul>
      <li>新しいドキュメントの名前: <tt>
        [%- IF pid == -1 %]
          <select name="pid">
            <option value="0" onselect="AllPathChange('', 0, 'Top directory')"></option>
            [% FOREACH hid IN allpath.keys.nsort %]
              <option value="[% hid %]"
                onselect="AllPathChange('[% allpath.$hid.fullpath FILTER js %]', [% hid %], '[% allpath.$hid.description FILTER js %]')"
                >[% allpath.$hid.fullpath %]</option>
            [% END %]
          </select>
        [% ELSE %]
          / <input type="hidden" name="pid" value="[% path_info.pathid %]">
          [% full_path FILTER html %]
        [% END %]
        </tt><input type="text" name="filename" value="" size="50"></li>
      <li>新しいドキュメントの説明: <input type="text" name="docdesc" value="" size="150"></li>
    </ul>
    <h4>新規ドキュメントに付けるラベル</h4>
    <ul>
      [% FOREACH item = Label.keys %]
        <li><input type="checkbox" name="label" value="[% item %]" />
          [% Label.$item.name %] ([% Label.$item.description %])</li>
      [% END %]
    </ul>
    [% INCLUDE entry/docform.html.tmpl %]
    <input type="submit" value="Add document">
    <input type="reset" value="Reset">
  </form>
[% END %]

<hr>

<ul>
  <li>ディレクトリの説明: <a href="pathinfo.cgi?pid=[% path_info.pathid FILTER html %]">[% full_path FILTER html %] ([% path_info.pathid FILTER html %])</a> - [% path_info.description FILTER html %]</li>
  <li>アクセス可能グループ: 
    [% IF group_list.size > 0 %][% group_list.join(', ') %]
    [% ELSE %](未定義)[% END %]</li>
</ul>

[% IF pid != -1 %]
  [% INCLUDE entry/table.html.tmpl       paths = path_list
                                         docs = doc_list %]
[% END %]

[% PROCESS global/footer.html.tmpl %]
